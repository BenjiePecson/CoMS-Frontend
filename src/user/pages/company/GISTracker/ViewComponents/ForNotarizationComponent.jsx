import { useEffect, useState } from "react";
import { useDispatch, useSelector } from "react-redux";
import {
  fetchRecord,
  gdrivefoldersState,
} from "../../../../store/GIS/GISRecordSlice";
import { useParams } from "react-router-dom";
import FrameWrapper from "../../DashboardComponents/FrameWrapper";
import Swal from "sweetalert2";
import axios from "axios";
import { showToast } from "../../../../../assets/global";

const ForNotarizationComponent = () => {
  const { companyId, recordId } = useParams();

  const selectedRecord = useSelector((state) => state.records.selectedRecord);
  const currentUser = useSelector((state) => state.user.user);

  const [errors, setErrors] = useState([]);

  const [gdrivefolder, setgdrivefolder] = useState("");
  const [showEdit, setShowEdit] = useState(false);

  const toggleUpdate = (setStatus, dialogText, btnText) => {
    Swal.fire({
      title: "Are you sure?",
      text: dialogText,
      icon: "warning",
      showCancelButton: true,
      confirmButtonColor: "#273069",
      confirmButtonText: btnText,
      cancelButtonColor: "#CDCDCD",
    }).then(async (result) => {
      if (result.isConfirmed) {
        let status = "error";
        let message = "Failed to update the record.";
        try {
          let response = await axios.patch(
            `/record/record/${selectedRecord.recordId}`,
            { status: setStatus }
          );

          if (response.status === 200) {
            status = "success";
            message = "Record was updated successfully.";
            // navigate(`/company/${companyId}/secretary-certificate`);
            dispatch(fetchRecord(recordId));
          }
        } catch (error) {
          console.log(error);
        } finally {
          showToast(status, message);
        }
      }
    });
  };

  const forNotarizationSVG = (
    <svg
      className="w-1/2"
      viewBox="0 0 404 384"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g clipPath="url(#clip0_0_1)">
        <path
          d="M206.901 0.79149L193.756 4.18529L31.8012 45.9977L18.6558 49.3915C12.2751 51.0464 6.81076 55.1677 3.4615 60.8512C0.112246 66.5346 -0.848381 73.316 0.79037 79.7076L57.7919 300.998C59.445 307.386 63.5616 312.857 69.2386 316.21C74.9155 319.563 81.6892 320.525 88.0736 318.884L88.1075 318.875L276.285 270.293L276.319 270.284C282.7 268.629 288.164 264.508 291.513 258.824C294.863 253.141 295.823 246.36 294.184 239.968L237.183 18.6773C235.53 12.2894 231.413 6.81881 225.736 3.46572C220.059 0.112627 213.286 -0.849115 206.901 0.79149Z"
          fill="#F2F2F2"
        />
        <path
          d="M208.689 7.72952L193.119 11.7493L36.0127 52.3099L20.4431 56.3295C15.8993 57.5081 12.0079 60.4429 9.62284 64.4902C7.23774 68.5375 6.55365 73.3667 7.72064 77.9183L64.7222 299.209C65.8994 303.758 68.831 307.654 72.8736 310.042C76.9163 312.429 81.74 313.114 86.2865 311.946L86.3204 311.937L274.498 263.355L274.532 263.346C279.076 262.167 282.967 259.232 285.352 255.185C287.737 251.138 288.421 246.309 287.254 241.757L230.253 20.4665C229.076 15.9175 226.144 12.0218 222.102 9.63399C218.059 7.24617 213.235 6.56127 208.689 7.72952Z"
          fill="white"
        />
        <path
          d="M196.932 79.3892L101.738 103.966C100.675 104.24 99.546 104.081 98.6003 103.522C97.6546 102.964 96.9693 102.052 96.6951 100.987C96.4209 99.923 96.5804 98.7931 97.1383 97.8464C97.6962 96.8996 98.607 96.2135 99.6702 95.939L194.865 71.3623C195.927 71.0889 197.055 71.2492 198 71.8079C198.945 72.3665 199.63 73.2779 199.904 74.3417C200.178 75.4055 200.019 76.5347 199.462 77.4812C198.904 78.4277 197.995 79.114 196.932 79.3892Z"
          fill="#F2F2F2"
        />
        <path
          d="M216.958 88.6653L105.227 117.511C104.163 117.786 103.035 117.626 102.089 117.068C101.143 116.509 100.458 115.597 100.184 114.533C99.9097 113.468 100.069 112.339 100.627 111.392C101.185 110.445 102.096 109.759 103.159 109.484L214.89 80.6384C215.953 80.3639 217.082 80.5235 218.028 81.0821C218.973 81.6406 219.659 82.5524 219.933 83.6169C220.207 84.6813 220.048 85.8112 219.49 86.7579C218.932 87.7047 218.021 88.3908 216.958 88.6653Z"
          fill="#F2F2F2"
        />
        <path
          d="M212.569 140.093L117.374 164.669C116.848 164.805 116.3 164.836 115.761 164.76C115.223 164.684 114.705 164.502 114.237 164.226C113.768 163.949 113.359 163.583 113.032 163.148C112.705 162.713 112.467 162.218 112.331 161.691C112.196 161.164 112.165 160.615 112.241 160.076C112.317 159.537 112.498 159.019 112.775 158.55C113.051 158.081 113.417 157.671 113.851 157.344C114.285 157.017 114.78 156.778 115.306 156.643L210.501 132.066C211.027 131.93 211.575 131.899 212.114 131.975C212.652 132.051 213.17 132.233 213.638 132.51C214.107 132.786 214.516 133.152 214.843 133.587C215.17 134.022 215.408 134.517 215.544 135.044C215.679 135.571 215.71 136.12 215.634 136.659C215.558 137.198 215.377 137.717 215.1 138.185C214.824 138.654 214.458 139.064 214.024 139.391C213.59 139.718 213.095 139.957 212.569 140.093Z"
          fill="#F2F2F2"
        />
        <path
          d="M232.594 149.369L120.863 178.215C120.337 178.351 119.789 178.381 119.25 178.305C118.712 178.229 118.194 178.048 117.726 177.771C117.258 177.494 116.848 177.128 116.521 176.693C116.194 176.258 115.956 175.763 115.821 175.236C115.685 174.709 115.654 174.161 115.73 173.622C115.806 173.083 115.988 172.564 116.264 172.095C116.54 171.626 116.906 171.217 117.34 170.889C117.775 170.562 118.269 170.324 118.796 170.188L230.527 141.342C231.59 141.067 232.719 141.227 233.664 141.785C234.61 142.344 235.295 143.256 235.57 144.32C235.844 145.385 235.684 146.515 235.126 147.461C234.568 148.408 233.658 149.094 232.594 149.369Z"
          fill="#F2F2F2"
        />
        <path
          d="M228.205 200.796L133.01 225.373C131.948 225.646 130.82 225.486 129.874 224.928C128.929 224.369 128.245 223.458 127.971 222.394C127.696 221.33 127.856 220.2 128.413 219.254C128.97 218.307 129.88 217.621 130.943 217.346L226.137 192.769C227.201 192.495 228.329 192.654 229.275 193.213C230.22 193.771 230.906 194.683 231.18 195.748C231.454 196.812 231.295 197.942 230.737 198.889C230.179 199.836 229.268 200.522 228.205 200.796Z"
          fill="#F2F2F2"
        />
        <path
          d="M248.231 210.072L136.5 238.918C135.973 239.055 135.425 239.086 134.886 239.01C134.347 238.934 133.829 238.753 133.36 238.476C132.892 238.2 132.482 237.834 132.155 237.399C131.828 236.964 131.589 236.468 131.453 235.941C131.318 235.413 131.287 234.864 131.363 234.325C131.439 233.786 131.621 233.267 131.898 232.798C132.174 232.329 132.54 231.919 132.975 231.592C133.41 231.265 133.905 231.027 134.432 230.891L246.163 202.045C247.226 201.771 248.355 201.93 249.301 202.489C250.246 203.048 250.932 203.959 251.206 205.024C251.48 206.088 251.321 207.218 250.763 208.165C250.205 209.112 249.294 209.798 248.231 210.072Z"
          fill="#F2F2F2"
        />
        <path
          d="M85.4864 129.166L51.798 137.863C51.2882 137.994 50.7473 137.917 50.294 137.65C49.8407 137.382 49.512 136.945 49.38 136.435L41.6469 106.413C41.516 105.903 41.5927 105.361 41.8602 104.908C42.1276 104.454 42.5639 104.125 43.0734 103.993L76.7619 95.2952C77.2716 95.1641 77.8125 95.2409 78.2658 95.5087C78.7191 95.7764 79.0478 96.2132 79.1798 96.7233L86.913 126.745C87.0438 127.255 86.9672 127.797 86.6997 128.251C86.4323 128.704 85.9959 129.033 85.4864 129.166Z"
          fill="#E6E6E6"
        />
        <path
          d="M101.123 189.869L67.4347 198.567C66.9249 198.698 66.3841 198.621 65.9307 198.353C65.4774 198.085 65.1487 197.649 65.0167 197.138L57.2836 167.117C57.1527 166.607 57.2295 166.065 57.4969 165.611C57.7643 165.157 58.2007 164.828 58.7102 164.696L92.3986 155.999C92.9084 155.868 93.4492 155.945 93.9025 156.212C94.3558 156.48 94.6846 156.917 94.8165 157.427L102.55 187.448C102.681 187.959 102.604 188.5 102.336 188.954C102.069 189.408 101.633 189.737 101.123 189.869Z"
          fill="#E6E6E6"
        />
        <path
          d="M116.759 250.573L83.071 259.27C82.5612 259.401 82.0203 259.324 81.567 259.056C81.1137 258.789 80.785 258.352 80.653 257.842L72.9198 227.82C72.789 227.31 72.8657 226.768 73.1331 226.315C73.4006 225.861 73.8369 225.532 74.3464 225.4L108.035 216.702C108.545 216.571 109.085 216.648 109.539 216.916C109.992 217.183 110.321 217.62 110.453 218.13L118.186 248.152C118.317 248.662 118.24 249.204 117.973 249.658C117.705 250.111 117.269 250.44 116.759 250.573Z"
          fill="#E6E6E6"
        />
        <path
          d="M338.193 56.8857H143.789C137.198 56.8932 130.879 59.5178 126.218 64.1839C121.557 68.85 118.936 75.1764 118.928 81.7752V310.306C118.936 316.904 121.557 323.231 126.218 327.897C130.879 332.563 137.198 335.188 143.789 335.195H338.193C344.785 335.188 351.104 332.563 355.765 327.897C360.425 323.231 363.047 316.904 363.055 310.306V81.7752C363.047 75.1764 360.425 68.85 355.765 64.1839C351.104 59.5178 344.785 56.8932 338.193 56.8857Z"
          fill="#E6E6E6"
        />
        <path
          d="M338.194 64.051H143.789C139.095 64.0563 134.595 65.9254 131.276 69.2482C127.957 72.571 126.09 77.0762 126.085 81.7754V310.306C126.09 315.005 127.957 319.51 131.276 322.833C134.595 326.156 139.095 328.025 143.789 328.03H338.194C342.887 328.025 347.387 326.156 350.706 322.833C354.025 319.51 355.892 315.005 355.897 310.306V81.7754C355.892 77.0762 354.025 72.5711 350.706 69.2483C347.387 65.9254 342.887 64.0563 338.194 64.051Z"
          fill="white"
        />
        <path
          d="M358.617 363C383.681 363 404 342.658 404 317.565C404 292.472 383.681 272.131 358.617 272.131C333.553 272.131 313.234 292.472 313.234 317.565C313.234 342.658 333.553 363 358.617 363Z"
          fill="#273069"
        />
        <path
          d="M308.935 189.628H210.627C210.083 189.629 209.544 189.522 209.041 189.314C208.538 189.106 208.081 188.801 207.696 188.416C207.311 188.031 207.006 187.574 206.798 187.07C206.589 186.567 206.482 186.028 206.482 185.483C206.482 184.938 206.589 184.399 206.798 183.896C207.006 183.393 207.311 182.936 207.696 182.551C208.081 182.166 208.538 181.861 209.041 181.653C209.544 181.445 210.083 181.338 210.627 181.338H308.935C310.033 181.34 311.085 181.777 311.86 182.554C312.635 183.331 313.071 184.385 313.071 185.483C313.071 186.582 312.635 187.635 311.86 188.412C311.085 189.189 310.033 189.627 308.935 189.628Z"
          fill="#E6E6E6"
        />
        <path
          d="M326.013 203.616H210.627C210.083 203.617 209.544 203.51 209.041 203.302C208.538 203.094 208.081 202.789 207.696 202.404C207.311 202.019 207.006 201.562 206.798 201.059C206.589 200.556 206.482 200.016 206.482 199.472C206.482 198.927 206.589 198.388 206.798 197.884C207.006 197.381 207.311 196.924 207.696 196.539C208.081 196.154 208.538 195.849 209.041 195.641C209.544 195.433 210.083 195.326 210.627 195.327H326.013C327.111 195.327 328.164 195.764 328.941 196.541C329.717 197.318 330.153 198.372 330.153 199.472C330.153 200.571 329.717 201.625 328.941 202.402C328.164 203.18 327.111 203.616 326.013 203.616Z"
          fill="#E6E6E6"
        />
        <path
          d="M308.935 252.317H210.627C210.083 252.318 209.544 252.211 209.041 252.003C208.538 251.795 208.081 251.49 207.696 251.105C207.311 250.72 207.006 250.263 206.798 249.76C206.589 249.257 206.482 248.717 206.482 248.173C206.482 247.628 206.589 247.089 206.798 246.585C207.006 246.082 207.311 245.625 207.696 245.24C208.081 244.855 208.538 244.55 209.041 244.342C209.544 244.134 210.083 244.027 210.627 244.028H308.935C310.033 244.028 311.087 244.465 311.863 245.242C312.639 246.019 313.075 247.073 313.075 248.173C313.075 249.272 312.639 250.326 311.863 251.103C311.087 251.881 310.033 252.317 308.935 252.317Z"
          fill="#E6E6E6"
        />
        <path
          d="M326.013 266.306H210.627C210.083 266.307 209.544 266.2 209.041 265.992C208.538 265.784 208.081 265.478 207.696 265.094C207.311 264.709 207.006 264.251 206.798 263.748C206.589 263.245 206.482 262.706 206.482 262.161C206.482 261.616 206.589 261.077 206.798 260.574C207.006 260.071 207.311 259.614 207.696 259.229C208.081 258.844 208.538 258.539 209.041 258.331C209.544 258.123 210.083 258.016 210.627 258.016H326.013C326.557 258.016 327.096 258.123 327.599 258.331C328.102 258.539 328.559 258.844 328.944 259.229C329.329 259.614 329.634 260.071 329.842 260.574C330.051 261.077 330.158 261.616 330.158 262.161C330.158 262.706 330.051 263.245 329.842 263.748C329.634 264.251 329.329 264.709 328.944 265.094C328.559 265.478 328.102 265.784 327.599 265.992C327.096 266.2 326.557 266.307 326.013 266.306Z"
          fill="#E6E6E6"
        />
        <path
          d="M188.605 209.967H153.814C153.288 209.966 152.783 209.756 152.411 209.384C152.039 209.011 151.83 208.506 151.829 207.979V176.975C151.83 176.449 152.039 175.943 152.411 175.571C152.783 175.198 153.288 174.989 153.814 174.988H188.605C189.131 174.989 189.636 175.198 190.008 175.571C190.38 175.943 190.589 176.449 190.59 176.975V207.979C190.589 208.506 190.38 209.011 190.008 209.384C189.636 209.756 189.131 209.966 188.605 209.967Z"
          fill="#E6E6E6"
        />
        <path
          d="M188.605 272.656H153.814C153.288 272.655 152.783 272.446 152.411 272.073C152.039 271.701 151.83 271.195 151.829 270.669V239.665C151.83 239.138 152.039 238.633 152.411 238.26C152.783 237.888 153.288 237.678 153.814 237.677H188.605C189.131 237.678 189.636 237.888 190.008 238.26C190.38 238.633 190.589 239.138 190.59 239.665V270.669C190.589 271.195 190.38 271.701 190.008 272.073C189.636 272.446 189.131 272.655 188.605 272.656Z"
          fill="#E6E6E6"
        />
        <path
          d="M309.044 119.842H236.565C235.467 119.842 234.414 119.405 233.638 118.628C232.861 117.851 232.425 116.796 232.425 115.697C232.425 114.598 232.861 113.544 233.638 112.766C234.414 111.989 235.467 111.552 236.565 111.552H309.044C310.142 111.552 311.195 111.989 311.972 112.766C312.748 113.544 313.184 114.598 313.184 115.697C313.184 116.796 312.748 117.851 311.972 118.628C311.195 119.405 310.142 119.842 309.044 119.842Z"
          fill="#CCCCCC"
        />
        <path
          d="M326.122 133.831H236.565C236.022 133.831 235.483 133.723 234.981 133.515C234.479 133.307 234.022 133.001 233.638 132.617C233.253 132.232 232.948 131.775 232.74 131.272C232.532 130.769 232.425 130.23 232.425 129.686C232.425 129.141 232.532 128.603 232.74 128.1C232.948 127.597 233.253 127.14 233.638 126.755C234.022 126.37 234.479 126.065 234.981 125.857C235.483 125.648 236.022 125.541 236.565 125.541H326.122C327.22 125.541 328.273 125.978 329.05 126.755C329.826 127.532 330.262 128.587 330.262 129.686C330.262 130.785 329.826 131.839 329.05 132.617C328.273 133.394 327.22 133.831 326.122 133.831Z"
          fill="#CCCCCC"
        />
        <path
          d="M220.525 150.783H153.705C153.179 150.782 152.674 150.573 152.302 150.2C151.93 149.828 151.721 149.323 151.72 148.796V96.5875C151.721 96.0606 151.93 95.5554 152.302 95.1828C152.674 94.8102 153.179 94.6007 153.705 94.6001H220.525C221.051 94.6007 221.556 94.8102 221.928 95.1828C222.3 95.5554 222.509 96.0606 222.51 96.5875V148.796C222.509 149.323 222.3 149.828 221.928 150.2C221.556 150.573 221.051 150.782 220.525 150.783Z"
          fill="#273069"
        />
        <g clipPath="url(#clip1_0_1)">
          <path
            d="M381.358 323.809C381.519 323.106 381.469 322.379 381.226 321.712C380.982 321.045 380.539 320.438 379.923 319.992C379.923 319.992 378.934 319.278 378.101 318.676C377.303 318.099 376.327 317.394 375.551 316.833C375.162 316.553 374.824 316.308 374.583 316.134C374.434 316.026 374.322 315.946 374.258 315.9C374.219 315.862 374.188 315.823 374.164 315.783C374.114 315.698 374.078 315.596 374.066 315.433C374.059 315.313 374.068 315.162 374.105 314.982C374.158 314.712 374.273 314.381 374.456 314.011C374.639 313.64 374.888 313.23 375.202 312.796C375.788 311.984 376.596 311.091 377.592 310.181C378.525 309.327 379.519 308.624 380.478 307.893C380.957 307.526 381.427 307.153 381.87 306.743C382.313 306.334 382.731 305.889 383.097 305.382C383.608 304.675 383.953 303.895 384.137 303.092C384.413 301.888 384.329 300.637 383.909 299.492C383.491 298.347 382.733 297.306 381.673 296.541C380.966 296.03 380.185 295.685 379.383 295.501C378.178 295.225 376.927 295.31 375.783 295.729C374.638 296.147 373.597 296.905 372.832 297.966C372.466 298.473 372.174 299.009 371.925 299.559C371.551 300.384 371.27 301.238 370.98 302.101C370.69 302.963 370.394 303.834 370.005 304.7C369.454 305.932 368.86 306.979 368.273 307.791C367.955 308.231 367.639 308.602 367.34 308.894C367.117 309.113 366.903 309.288 366.708 309.418C366.562 309.515 366.427 309.586 366.309 309.635C366.13 309.709 365.991 309.732 365.885 309.729C365.789 309.727 365.713 309.708 365.625 309.663C365.254 309.395 363.226 307.93 361.78 306.885C361.364 306.585 360.908 306.256 360.557 306.002C360.206 305.748 359.959 305.57 359.958 305.57C359.548 305.273 359.092 305.071 358.624 304.965C357.922 304.804 357.194 304.853 356.527 305.097C355.861 305.34 355.253 305.783 354.808 306.4L350.459 312.42L351.246 312.989L376.403 331.163L380.752 325.142C381.05 324.732 381.251 324.276 381.358 323.809ZM374.406 299.103C374.763 298.609 375.198 298.215 375.686 297.92C376.416 297.477 377.262 297.258 378.108 297.285C378.954 297.313 379.795 297.581 380.535 298.115C381.029 298.472 381.423 298.907 381.719 299.394C382.162 300.125 382.38 300.971 382.353 301.816C382.326 302.663 382.057 303.505 381.523 304.245C381.252 304.62 380.927 304.971 380.553 305.316C379.993 305.834 379.321 306.337 378.589 306.885C377.857 307.434 377.067 308.03 376.281 308.748C375.205 309.732 374.312 310.713 373.628 311.659C373.256 312.174 372.946 312.679 372.703 313.174C372.522 313.546 372.377 313.914 372.277 314.279C372.212 314.517 372.169 314.755 372.145 314.992L367.149 311.383C367.269 311.329 367.389 311.272 367.505 311.206C367.929 310.964 368.33 310.645 368.718 310.263C369.106 309.881 369.481 309.434 369.847 308.928C370.531 307.981 371.181 306.825 371.778 305.494C372.357 304.199 372.729 302.964 373.106 301.877C373.294 301.332 373.483 300.824 373.693 300.361C373.904 299.898 374.135 299.479 374.406 299.103ZM375.966 328.451L353.17 311.983L356.382 307.537C356.525 307.339 356.698 307.184 356.891 307.067C357.181 306.89 357.519 306.803 357.855 306.814C358.193 306.825 358.525 306.931 358.821 307.144C358.822 307.144 359.069 307.323 359.42 307.576C359.771 307.83 360.226 308.159 360.643 308.46C361.872 309.347 363.517 310.536 364.212 311.038C364.42 311.189 364.547 311.28 364.547 311.28L364.591 311.312L373.016 317.398L373.06 317.43C373.06 317.43 373.204 317.534 373.445 317.709C373.553 317.786 373.684 317.881 373.826 317.984C374.639 318.571 375.944 319.514 376.964 320.25C377.797 320.852 378.785 321.566 378.785 321.566C378.983 321.71 379.139 321.882 379.256 322.076C379.432 322.365 379.519 322.703 379.509 323.04C379.498 323.378 379.392 323.71 379.178 324.005L375.967 328.451L375.966 328.451Z"
            fill="white"
          />
          <path
            d="M373.084 331.456L351.224 315.663L349.661 317.826L371.522 333.619L373.084 331.456Z"
            fill="white"
          />
        </g>
        <ellipse
          cx="349.485"
          cy="335.224"
          rx="13.485"
          ry="7.22411"
          fill="white"
        />
        <path
          d="M346 335L348.667 337L354 333"
          stroke="#273069"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
      </g>
      <path
        d="M142 370.436V372.47H136.762V375.692H140.776V377.69H136.762V383H134.242V370.436H142ZM148.215 383.162C147.255 383.162 146.391 382.952 145.623 382.532C144.855 382.1 144.249 381.494 143.805 380.714C143.373 379.934 143.157 379.034 143.157 378.014C143.157 376.994 143.379 376.094 143.823 375.314C144.279 374.534 144.897 373.934 145.677 373.514C146.457 373.082 147.327 372.866 148.287 372.866C149.247 372.866 150.117 373.082 150.897 373.514C151.677 373.934 152.289 374.534 152.733 375.314C153.189 376.094 153.417 376.994 153.417 378.014C153.417 379.034 153.183 379.934 152.715 380.714C152.259 381.494 151.635 382.1 150.843 382.532C150.063 382.952 149.187 383.162 148.215 383.162ZM148.215 380.966C148.671 380.966 149.097 380.858 149.493 380.642C149.901 380.414 150.225 380.078 150.465 379.634C150.705 379.19 150.825 378.65 150.825 378.014C150.825 377.066 150.573 376.34 150.069 375.836C149.577 375.32 148.971 375.062 148.251 375.062C147.531 375.062 146.925 375.32 146.433 375.836C145.953 376.34 145.713 377.066 145.713 378.014C145.713 378.962 145.947 379.694 146.415 380.21C146.895 380.714 147.495 380.966 148.215 380.966ZM157.785 374.576C158.109 374.048 158.529 373.634 159.045 373.334C159.573 373.034 160.173 372.884 160.845 372.884V375.53H160.179C159.387 375.53 158.787 375.716 158.379 376.088C157.983 376.46 157.785 377.108 157.785 378.032V383H155.265V373.028H157.785V374.576ZM177.578 383H175.058L169.352 374.378V383H166.832V370.418H169.352L175.058 379.058V370.418H177.578V383ZM184.496 383.162C183.536 383.162 182.672 382.952 181.904 382.532C181.136 382.1 180.53 381.494 180.086 380.714C179.654 379.934 179.438 379.034 179.438 378.014C179.438 376.994 179.66 376.094 180.104 375.314C180.56 374.534 181.178 373.934 181.958 373.514C182.738 373.082 183.608 372.866 184.568 372.866C185.528 372.866 186.398 373.082 187.178 373.514C187.958 373.934 188.57 374.534 189.014 375.314C189.47 376.094 189.698 376.994 189.698 378.014C189.698 379.034 189.464 379.934 188.996 380.714C188.54 381.494 187.916 382.1 187.124 382.532C186.344 382.952 185.468 383.162 184.496 383.162ZM184.496 380.966C184.952 380.966 185.378 380.858 185.774 380.642C186.182 380.414 186.506 380.078 186.746 379.634C186.986 379.19 187.106 378.65 187.106 378.014C187.106 377.066 186.854 376.34 186.35 375.836C185.858 375.32 185.252 375.062 184.532 375.062C183.812 375.062 183.206 375.32 182.714 375.836C182.234 376.34 181.994 377.066 181.994 378.014C181.994 378.962 182.228 379.694 182.696 380.21C183.176 380.714 183.776 380.966 184.496 380.966ZM194.481 375.098V379.922C194.481 380.258 194.559 380.504 194.715 380.66C194.883 380.804 195.159 380.876 195.543 380.876H196.713V383H195.129C193.005 383 191.943 381.968 191.943 379.904V375.098H190.755V373.028H191.943V370.562H194.481V373.028H196.713V375.098H194.481ZM197.877 377.978C197.877 376.97 198.075 376.076 198.471 375.296C198.879 374.516 199.425 373.916 200.109 373.496C200.805 373.076 201.579 372.866 202.431 372.866C203.175 372.866 203.823 373.016 204.375 373.316C204.939 373.616 205.389 373.994 205.725 374.45V373.028H208.263V383H205.725V381.542C205.401 382.01 204.951 382.4 204.375 382.712C203.811 383.012 203.157 383.162 202.413 383.162C201.573 383.162 200.805 382.946 200.109 382.514C199.425 382.082 198.879 381.476 198.471 380.696C198.075 379.904 197.877 378.998 197.877 377.978ZM205.725 378.014C205.725 377.402 205.605 376.88 205.365 376.448C205.125 376.004 204.801 375.668 204.393 375.44C203.985 375.2 203.547 375.08 203.079 375.08C202.611 375.08 202.179 375.194 201.783 375.422C201.387 375.65 201.063 375.986 200.811 376.43C200.571 376.862 200.451 377.378 200.451 377.978C200.451 378.578 200.571 379.106 200.811 379.562C201.063 380.006 201.387 380.348 201.783 380.588C202.191 380.828 202.623 380.948 203.079 380.948C203.547 380.948 203.985 380.834 204.393 380.606C204.801 380.366 205.125 380.03 205.365 379.598C205.605 379.154 205.725 378.626 205.725 378.014ZM213.244 374.576C213.568 374.048 213.988 373.634 214.504 373.334C215.032 373.034 215.632 372.884 216.304 372.884V375.53H215.638C214.846 375.53 214.246 375.716 213.838 376.088C213.442 376.46 213.244 377.108 213.244 378.032V383H210.724V373.028H213.244V374.576ZM219.28 371.84C218.836 371.84 218.464 371.702 218.164 371.426C217.876 371.138 217.732 370.784 217.732 370.364C217.732 369.944 217.876 369.596 218.164 369.32C218.464 369.032 218.836 368.888 219.28 368.888C219.724 368.888 220.09 369.032 220.378 369.32C220.678 369.596 220.828 369.944 220.828 370.364C220.828 370.784 220.678 371.138 220.378 371.426C220.09 371.702 219.724 371.84 219.28 371.84ZM220.522 373.028V383H218.002V373.028H220.522ZM225.316 380.93H229.762V383H222.454V380.966L226.81 375.098H222.472V373.028H229.708V375.062L225.316 380.93ZM231.065 377.978C231.065 376.97 231.263 376.076 231.659 375.296C232.067 374.516 232.613 373.916 233.297 373.496C233.993 373.076 234.767 372.866 235.619 372.866C236.363 372.866 237.011 373.016 237.563 373.316C238.127 373.616 238.577 373.994 238.913 374.45V373.028H241.451V383H238.913V381.542C238.589 382.01 238.139 382.4 237.563 382.712C236.999 383.012 236.345 383.162 235.601 383.162C234.761 383.162 233.993 382.946 233.297 382.514C232.613 382.082 232.067 381.476 231.659 380.696C231.263 379.904 231.065 378.998 231.065 377.978ZM238.913 378.014C238.913 377.402 238.793 376.88 238.553 376.448C238.313 376.004 237.989 375.668 237.581 375.44C237.173 375.2 236.735 375.08 236.267 375.08C235.799 375.08 235.367 375.194 234.971 375.422C234.575 375.65 234.251 375.986 233.999 376.43C233.759 376.862 233.639 377.378 233.639 377.978C233.639 378.578 233.759 379.106 233.999 379.562C234.251 380.006 234.575 380.348 234.971 380.588C235.379 380.828 235.811 380.948 236.267 380.948C236.735 380.948 237.173 380.834 237.581 380.606C237.989 380.366 238.313 380.03 238.553 379.598C238.793 379.154 238.913 378.626 238.913 378.014ZM246.846 375.098V379.922C246.846 380.258 246.924 380.504 247.08 380.66C247.248 380.804 247.524 380.876 247.908 380.876H249.078V383H247.494C245.37 383 244.308 381.968 244.308 379.904V375.098H243.12V373.028H244.308V370.562H246.846V373.028H249.078V375.098H246.846ZM252.168 371.84C251.724 371.84 251.352 371.702 251.052 371.426C250.764 371.138 250.62 370.784 250.62 370.364C250.62 369.944 250.764 369.596 251.052 369.32C251.352 369.032 251.724 368.888 252.168 368.888C252.612 368.888 252.978 369.032 253.266 369.32C253.566 369.596 253.716 369.944 253.716 370.364C253.716 370.784 253.566 371.138 253.266 371.426C252.978 371.702 252.612 371.84 252.168 371.84ZM253.41 373.028V383H250.89V373.028H253.41ZM260.328 383.162C259.368 383.162 258.504 382.952 257.736 382.532C256.968 382.1 256.362 381.494 255.918 380.714C255.486 379.934 255.27 379.034 255.27 378.014C255.27 376.994 255.492 376.094 255.936 375.314C256.392 374.534 257.01 373.934 257.79 373.514C258.57 373.082 259.44 372.866 260.4 372.866C261.36 372.866 262.23 373.082 263.01 373.514C263.79 373.934 264.402 374.534 264.846 375.314C265.302 376.094 265.53 376.994 265.53 378.014C265.53 379.034 265.296 379.934 264.828 380.714C264.372 381.494 263.748 382.1 262.956 382.532C262.176 382.952 261.3 383.162 260.328 383.162ZM260.328 380.966C260.784 380.966 261.21 380.858 261.606 380.642C262.014 380.414 262.338 380.078 262.578 379.634C262.818 379.19 262.938 378.65 262.938 378.014C262.938 377.066 262.686 376.34 262.182 375.836C261.69 375.32 261.084 375.062 260.364 375.062C259.644 375.062 259.038 375.32 258.546 375.836C258.066 376.34 257.826 377.066 257.826 378.014C257.826 378.962 258.06 379.694 258.528 380.21C259.008 380.714 259.608 380.966 260.328 380.966ZM272.905 372.884C274.093 372.884 275.053 373.262 275.785 374.018C276.517 374.762 276.883 375.806 276.883 377.15V383H274.363V377.492C274.363 376.7 274.165 376.094 273.769 375.674C273.373 375.242 272.833 375.026 272.149 375.026C271.453 375.026 270.901 375.242 270.493 375.674C270.097 376.094 269.899 376.7 269.899 377.492V383H267.379V373.028H269.899V374.27C270.235 373.838 270.661 373.502 271.177 373.262C271.705 373.01 272.281 372.884 272.905 372.884Z"
        fill="black"
      />
      <defs>
        <clipPath id="clip0_0_1">
          <rect width="404" height="363" fill="white" />
        </clipPath>
        <clipPath id="clip1_0_1">
          <rect
            width="36"
            height="36"
            fill="white"
            transform="translate(367.082 286) rotate(35.8449)"
          />
        </clipPath>
      </defs>
    </svg>
  );

  const accordionContent = (accordion) => {
    return (
      <>
        <div className="flex flex-col gap-2 w-full">
          <div className="flex flex-row justify-between">
            <div
              className="flex flex-row gap-2"
              onMouseEnter={() => {
                setShowEdit(true);
              }}
              onMouseLeave={() => {
                setShowEdit(false);
              }}
            >
              <h1 className="font-bold text-md">Attached Files</h1>
              <button
                onClick={() => {
                  document.getElementById("changedriveID").showModal();
                  setgdrivefolder(selectedRecord.folder_id);
                }}
                className={`${showEdit ? "" : "hidden"}`}
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  className="size-4"
                >
                  <path d="M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z" />
                </svg>
              </button>
            </div>

            {accordion.gdrivefolder != null && accordion.gdrivefolder != "" && (
              <h1
                className="poppins-regular text-sm text-blue-500 cursor-pointer flex flex-row items-end"
                onClick={() => {
                  if (
                    accordion.gdrivefolder != null &&
                    accordion.gdrivefolder != ""
                  ) {
                    window.open(
                      `https://drive.google.com/drive/folders/${accordion.gdrivefolder}`,
                      "_blank"
                    );
                  } else {
                    showToast(
                      "warning",
                      "Please check again the Google Drive Folder ID."
                    );
                  }
                }}
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  className="size-6"
                >
                  <path
                    fillRule="evenodd"
                    d="M16.5 3.75a1.5 1.5 0 0 1 1.5 1.5v13.5a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-1.5-1.5V15a.75.75 0 0 0-1.5 0v3.75a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3V5.25a3 3 0 0 0-3-3h-6a3 3 0 0 0-3 3V9A.75.75 0 1 0 9 9V5.25a1.5 1.5 0 0 1 1.5-1.5h6Zm-5.03 4.72a.75.75 0 0 0 0 1.06l1.72 1.72H2.25a.75.75 0 0 0 0 1.5h10.94l-1.72 1.72a.75.75 0 1 0 1.06 1.06l3-3a.75.75 0 0 0 0-1.06l-3-3a.75.75 0 0 0-1.06 0Z"
                    clipRule="evenodd"
                  />
                </svg>
                Go to Drive
              </h1>
            )}
          </div>
          <div className="bg-white p-5 rounded-lg">
            {accordion.gdrivefolder != undefined &&
            accordion.gdrivefolder != "" ? (
              <FrameWrapper gdrivefolder={accordion.gdrivefolder} />
            ) : (
              <>
                <div className="flex flex-col items-center gap-2">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    className="size-6"
                  >
                    <path
                      fillRule="evenodd"
                      d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"
                      clipRule="evenodd"
                    />
                  </svg>

                  <h1 className="font-bold text-lg">No folder ID specified.</h1>
                  <p className="text-sm">
                    Please provide the Google Drive folder ID for{" "}
                    {accordion.title}.
                  </p>

                  <div
                    className="py-2"
                    onClick={() => {
                      document.getElementById("changedriveID").showModal();
                      setgdrivefolder(selectedRecord.folder_id);
                    }}
                  >
                    <button className="btn btn-outline btn-sm">
                      Set Folder ID
                    </button>
                  </div>
                </div>
              </>
            )}
          </div>
        </div>
      </>
    );
  };

  const dialogComponents = () => {
    const warningSVG = (
      <svg
        width="91"
        height="91"
        viewBox="0 0 91 91"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M45.6423 23.8995V50.18M45.6423 67.7447L45.6861 67.6961M45.6422 89.6016C69.8546 89.6016 89.4829 69.9911 89.4829 45.8008C89.4829 21.6103 69.8546 2 45.6422 2C21.4297 2 1.80151 21.6103 1.80151 45.8008C1.80151 69.9911 21.4297 89.6016 45.6422 89.6016Z"
          stroke="#F38F33"
          strokeWidth="2.62921"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
      </svg>
    );

    return (
      <>
        <dialog id="confirmationModal" className="modal">
          <div className="modal-box w-full md:w-1/2 lg:w-1/3  max-w-5xl">
            <div className="flex flex-col gap-5 items-center">
              {warningSVG}

              <h1 className="poppins-bold text-[20px]">Are you sure?</h1>

              <p className="poppins-regular text-[15px]">
                You want to proceed to the next step?
              </p>

              <div className="flex flex-row gap-10">
                <button
                  className="btn bg-primary text-white btn-sm py-5 flex flex-col justify-center items-center"
                  onClick={async (e) => {
                    let status = "error";
                    let message = "Failed to update the record.";
                    try {
                      const modified_by = `${currentUser.first_name} ${currentUser.last_name}`;

                      let response = await axios.patch(
                        `/record/record/${selectedRecord.recordId}`,
                        { status: "Filed with SEC", modified_by }
                      );

                      if (response.status === 200) {
                        status = "success";
                        message = "Record was updated successfully.";
                        dispatch(fetchRecord(recordId));
                      }
                    } catch (error) {
                      console.log(error);
                    } finally {
                      showToast(status, message);
                    }
                  }}
                >
                  Yes, proceed!
                </button>

                <button
                  className="btn bg-[#CDCDCD] btn-sm py-5 flex flex-col justify-center items-center px-5"
                  onClick={(e) => {
                    document.getElementById("confirmationModal").close();
                  }}
                >
                  Cancel
                </button>
              </div>
            </div>
          </div>
        </dialog>

        <dialog id="attachFileModal" className="modal">
          <div className="modal-box w-11/12 max-w-5xl">
            <div className="flex flex-row justify-between py-4">
              <form method="dialog">
                <button className="btn btn-sm btn-circle btn-ghost absolute right-3 top-2">
                  ✕
                </button>
              </form>
            </div>
            <div className="flex flex-col gap-5 items-center w-full">
              {accordionContent({
                title: "Attached Files",
                gdrivefolder: selectedRecord.folder_id,
              })}
            </div>
          </div>
        </dialog>

        <dialog id="changedriveID" className="modal">
          <div className="modal-box">
            <div className="flex flex-row justify-between py-4">
              <form method="dialog">
                <button className="btn btn-sm btn-circle btn-ghost absolute right-3 top-2">
                  ✕
                </button>
              </form>
            </div>
            <div className="flex flex-col gap-5">
              <h1 className="poppins-semibold text-md">
                Update Google Drive Folder ID
              </h1>
              <label className="form-control w-full">
                <div className="label">
                  <span className="poppins-regular text-[12px]">
                    Google Drive Folder ID{" "}
                    <span className="text-red-500">*</span>
                  </span>
                </div>
                <input
                  type="text"
                  className={`input input-bordered w-full ${
                    errors.gdrivefolder && `input-error`
                  }`}
                  name="gdrivefolders"
                  value={gdrivefolder}
                  onChange={(e) => {
                    setgdrivefolder(e.target.value);
                  }}
                />
                {errors.gdrivefolders && (
                  <span className="text-[12px] text-red-500">
                    {errors.gdrivefolder}
                  </span>
                )}
              </label>

              <button
                className="btn bg-primary text-white"
                onClick={async (e) => {
                  try {
                    let response = await axios.patch(
                      `/record/record/${recordId}`,
                      {
                        folder_id: gdrivefolder,
                      }
                    );
                    if (response.status === 200) {
                      dispatch(fetchRecord(recordId));
                    }
                  } catch (error) {
                    console.log(error);
                  } finally {
                    document.getElementById("changedriveID").close();
                  }
                }}
              >
                Save
              </button>
            </div>
          </div>
        </dialog>
      </>
    );
  };

  const dispatch = useDispatch();

  useEffect(() => {
    dispatch(fetchRecord(recordId));
  }, []);

  return (
    <>
      <div className="flex flex-col justify-between items-center flex-1">
        <div className="flex flex-col justify-center flex-1 w-full items-center">
          {forNotarizationSVG}
        </div>
        <div className="w-full px-5 flex flex-row justify-between">
          <button
            className="btn bg-primary text-white"
            onClick={() => {
              document.getElementById("attachFileModal").showModal();
            }}
          >
            Attach Files
          </button>
          <button
            className="btn"
            onClick={() => {
              document.getElementById("confirmationModal").showModal();
            }}
          >
            Filed with SEC
          </button>
        </div>
      </div>

      <div>{dialogComponents()}</div>
    </>
  );
};

export default ForNotarizationComponent;
